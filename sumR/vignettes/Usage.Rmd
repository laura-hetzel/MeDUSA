---
title: "Usage"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Usage}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

_This package is under heavy development. Please do not use this package for actual reserach._

```{r setup, eval =F}
library(sumR)
```

First we load up some example data. Here we have 4 injection of which 1 is a blank sample, all with negative polarity. These files have spectra which are combined together and centroided. 
```{r files, eval =F}
dir <- file.path(r"(C:\Users/pmaas/Downloads/stem_cell_blank_cell_samples/stem_cell_blank_cell_samples)")
f <- list.files(dir, full.names = T, pattern = ".mzML")
f <- f[13:length(f)]
```

## Full pipeline

```{r, eval = F}
exp <- peakPicking(f, doCentroid = T, massDefect = 0.8) %>%
  binSpectra(fraction = 0.1, npeaks = 0, meanSNR = 0, tolerance = 0.002) %>%
  binCells(tolerance = 0.002, filter = TRUE) %>%
  imputation(cores = 4, normalize = F) %>%
  isotopeTagging(assay = "Imputed", plot = FALSE, filter = TRUE) 
```

## Data inspection
### PCA
```{r pca, eval = F}
sumR:::PCA_ind(t(assay(exp, "Imputed")))
```

```{r sessionInfo}
sessionInfo()
```
